include:
  - template: Jobs/SAST.gitlab-ci.yml
  - template: Jobs/SAST-IaC.gitlab-ci.yml
  #- template: Jobs/Dependency-Scanning.latest.gitlab-ci.yml


  #- template: Jobs/Container-Scanning.gitlab-ci.yml
  #- template: DAST.gitlab-ci.yml

variables:
  GITLAB_ADVANCED_SAST_ENABLED: 'true'
  #DS_ENFORCE_NEW_ANALYZER: 'true'

#variables:
  #DAST_WEBSITE: http://localhost:8080
  #DAST_FULL_SCAN_ENABLED: "true" 
  #DAST_BROWSER_SCAN: "true"

stages:
  - build
  - test
  - deploy
  - dast
services:
  - docker:latest
image: docker:latest
docker-compose-build:
  stage: build
  script:
    - echo "Building services with Docker Compose..."
    - docker compose pull
    - docker compose up -d --build --force-recreate
    - echo "Services are up and running."
    - docker ps